AWSTemplateFormatVersion: "2010-09-09"
Resources:
  {% for k, v in RootConfig.items() %}
    {% if "GlueJob" in k %}
    {{ "#   " + v.Description }}
    {{ k }}:
        Type: AWS::Glue::Job
        Properties:
            {% if v.AllocatedCapacity != None %}
            AllocatedCapacity: {{ v.AllocatedCapacity }}
            {% endif %}
            Command:
                {% if v.CommandName != None %}
                Name: {{ v.CommandName }}
                {% endif %}
                {% if v.CommandPythonVersion != None %}
                PythonVersion: {{ v.CommandPythonVersion }}
                {% endif %}
                {% if v.CommandScriptLocation != None %}
                ScriptLocation: {{ v.CommandScriptLocation }}
                {% endif %}
            {% for i in v.Connections if i != None %}
            Connections:
                {% for j in v.Connections %}
                - {{ j }}
                {% endfor %}
            {% endfor %}
            {% if v.DefaultArguments != None %}
            DefaultArguments: {{ v.DefaultArguments }}
            {% endif %}
            {% if v.Description != None %}
            Description: {{ v.Description }}
            {% endif %}
            {% if v.MaxConcurrentRuns != None %}
            ExecutionProperty:
                MaxConcurrentRuns: {{ v.MaxConcurrentRuns }}
            {% endif %}
            {% if v.GlueVersion != None %}
            GlueVersion: {{ v.GlueVersion }}
            {% endif %}
            {% if v.LogUri != None %}
            LogUri: {{ v.LogUri }}
            {% endif %}
            {% if v.MaxCapacity != None %}
            MaxCapacity: {{ v.MaxCapacity }}
            {% endif %}
            {% if v.MaxRetries != None %}
            MaxRetries: {{ v.MaxRetries }}
            {% endif %}
            {% if v.Name != None %}
            Name: {{ v.Name }}
            {% endif %}
            {% if v.NumberOfWorkers != None %}
            NumberOfWorkers: {{ v.NumberOfWorkers }}
            {% endif %}
            {% if v.Role != None %}
            Role: {{ v.Role }}
            {% endif %}
            {% if v.SecurityConfiguration != None %}
            SecurityConfiguration: {{ v.SecurityConfiguration }}
            {% endif %}
            {% if v.WorkerType != None %}
            WorkerType: {{ v.WorkerType }}
            {% endif %}
    {% endif %}

    {% if "GlueClassifier" in k %}
    {{ k }}:
        Type: AWS::Glue::Classifier
        Properties:
          {% if v.CsvClassifier.Delimiter != None and v.CsvClassifier.QuoteSymbol != None %}
          CsvClassifier:
            {% if v.CsvClassifier.AllowSingleColumn != None %}
            AllowSingleColumn: {{v.CsvClassifier.AllowSingleColumn}}
            {% endif %}
            {% if v.CsvClassifier.ContainsHeader != None %}
            ContainsHeader: {{v.CsvClassifier.ContainsHeader}}
            {% endif %}
            {% if v.CsvClassifier.Delimiter != None %}
            Delimiter: {{v.CsvClassifier.Delimiter}}
            {% endif %}
            {% if v.CsvClassifier.DisableValueTrimming != None %}
            DisableValueTrimming: {{v.CsvClassifier.DisableValueTrimming}}
            {% endif %}
            {% for i in v.CsvClassifier.Header if i != None %}
            Header:
                {% for j in v.CsvClassifier.Header %}
              - {{ j }}
                {% endfor %}
            {% endfor %}
            Name: String
            QuoteSymbol: String
          {% endif %}
          GrokClassifier:
            Classification: String
            CustomPatterns: String
            GrokPattern: String
            Name: String
          JsonClassifier:
            JsonPath: String
            Name: String
          XMLClassifier:
            Classification: String
            Name: String
            RowTag: String
    {% endif %}
  {% endfor %}